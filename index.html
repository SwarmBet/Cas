<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>SwarmBet - Modern Classics</title>
    <style>
        :root { --orange: #ff9900; --dark: #0a0a0a; --panel: #111111; --card-bg: #1a1a1a; --text-gray: #888; }
        body { 
            background-color: var(--dark); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; 
            display: flex; flex-direction: column; min-height: 100vh;
        }

        /* NAVBAR & USER */
        .navbar { display: flex; justify-content: space-between; align-items: center; padding: 10px 40px; background: #000; border-bottom: 2px solid var(--orange); position: sticky; top: 0; z-index: 100; }
        .nav-links span { cursor: pointer; font-weight: bold; color: #888; margin-left: 20px; transition: 0.3s; }
        .nav-links span.active, .nav-links span:hover { color: var(--orange); }
        .user-section { position: relative; cursor: pointer; padding: 5px 10px; }
        .logout-btn { position: absolute; top: 100%; right: 0; background: #ff4444; color: white; border: none; padding: 8px 15px; border-radius: 5px; display: none; cursor: pointer; font-weight: bold; width: 100px; }
        .user-section:hover .logout-btn { display: block; }

        .container { width: 1100px; margin: 30px auto; flex: 1; }
        .hidden { display: none !important; }

        /* NEW CLASSICS DESIGN */
        .section-title { font-size: 24px; font-weight: 900; margin-bottom: 25px; display: flex; align-items: center; gap: 10px; }
        .section-title::before { content: ''; width: 4px; height: 24px; background: #3498db; border-radius: 2px; }

        .games-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; }
        .game-card { 
            background: var(--card-bg); border-radius: 15px; padding: 30px 20px; text-align: center; 
            transition: 0.3s; cursor: pointer; border: 1px solid #222; position: relative; overflow: hidden;
        }
        .game-card:hover { transform: translateY(-5px); background: #222; border-color: #444; }
        
        .icon-box { 
            width: 60px; height: 60px; background: rgba(0,0,0,0.3); border-radius: 12px; 
            margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; font-size: 30px; 
            border: 1px solid rgba(255,255,255,0.05);
        }
        .game-card h3 { margin: 10px 0 5px; font-size: 18px; }
        .game-card p { color: var(--text-gray); font-size: 13px; margin-bottom: 20px; }
        
        .btn-card-play { 
            background: #222; color: var(--orange); border: 1px solid #333; padding: 8px 0; 
            width: 100%; border-radius: 8px; font-weight: bold; transition: 0.2s;
        }
        .game-card:hover .btn-card-play { background: var(--orange); color: black; border-color: var(--orange); }

        /* GAME UI (MINES, ROULETTE, ETC) */
        .active-game-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 1000; display: flex; justify-content: center; align-items: center; }
        .game-window { background: #111; padding: 40px; border-radius: 20px; border: 1px solid #333; position: relative; width: 800px; }
        .close-game { position: absolute; top: 20px; right: 20px; font-size: 24px; cursor: pointer; color: #555; }
        .close-game:hover { color: white; }

        /* MINES GRID */
        .m-grid { display: grid; grid-template-columns: repeat(5, 65px); gap: 10px; justify-content: center; margin-top: 20px; }
        .tile { width: 65px; height: 65px; background: #000; border: 1px solid #333; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 30px; transition: 0.1s; }
        .tile:hover { background: #111; }

        footer { text-align: center; padding: 40px; color: #333; font-size: 12px; }
    </style>
</head>
<body onclick="initAudio()">

<div id="auth-screen" style="display:flex; justify-content:center; align-items:center; height: 100vh;">
    <div style="background:#111; padding:40px; border-radius:20px; text-align:center; width:300px; border:1px solid #222;">
        <h1 style="color:var(--orange); margin-bottom:30px;">SWARMBET</h1>
        <input type="text" id="user" placeholder="Jm√©no" style="width:100%; padding:12px; background:#000; border:1px solid #333; color:white; border-radius:8px; margin-bottom:10px;">
        <input type="password" id="pass" placeholder="Heslo" style="width:100%; padding:12px; background:#000; border:1px solid #333; color:white; border-radius:8px; margin-bottom:20px;">
        <button onclick="auth('login')" style="width:100%; padding:12px; background:var(--orange); border:none; border-radius:8px; font-weight:bold; cursor:pointer;">P≈òIHL√ÅSIT</button>
    </div>
</div>

<div id="main-app" class="hidden">
    <nav class="navbar">
        <div style="font-size:24px; font-weight:900; color:var(--orange);">S<span>B</span></div>
        <div class="nav-links">
            <span onclick="showPage('home')">DOM≈Æ</span>
            <span class="active" onclick="showPage('games')">HRY</span>
            <span>DISCORD</span>
        </div>
        <div class="user-section">
            <div style="text-align:right">
                <div class="user-name" id="display-name">---</div>
                <div style="color:var(--orange); font-size:13px;">‚≠ê <span id="display-chips">0</span></div>
            </div>
            <button class="logout-btn" onclick="logout()">ODHL√ÅSIT</button>
        </div>
    </nav>

    <div class="container">
        <div id="page-games">
            <div class="section-title">CLASSICS</div>
            <div class="games-grid">
                <div class="game-card">
                    <div class="icon-box" style="color:#f1c40f;">ü™ô</div>
                    <h3>Coin Flip</h3>
                    <p>flip a coin</p>
                    <button class="btn-card-play">Play</button>
                </div>
                <div class="game-card" onclick="openGame('dice')">
                    <div class="icon-box" style="color:#3498db;">üé≤</div>
                    <h3>Dice Roll</h3>
                    <p>roll dice vs robot</p>
                    <button class="btn-card-play">Play</button>
                </div>
                <div class="game-card" onclick="openGame('mines')">
                    <div class="icon-box" style="color:#e91e63;">üí£</div>
                    <h3>Mines</h3>
                    <p>avoid the bombs</p>
                    <button class="btn-card-play">Play</button>
                </div>
                <div class="game-card" onclick="openGame('roulette')">
                    <div class="icon-box" style="color:#1abc9c;">üîò</div>
                    <h3>Roulette</h3>
                    <p>spin the wheel</p>
                    <button class="btn-card-play">Play</button>
                </div>
                </div>
        </div>
    </div>

    <div id="game-overlay" class="active-game-overlay hidden">
        <div class="game-window">
            <span class="close-game" onclick="closeGame()">&times;</span>
            <div id="game-content"></div>
        </div>
    </div>

    <footer>¬© 2026 SwarmBet | Pro z√°bavu | Verze 2.4</footer>
</div>

<script>
    const DB_URL = "https://casbss-c75a0-default-rtdb.europe-west1.firebasedatabase.app/users";
    let currentUser = localStorage.getItem('swarm_user');
    let userData = { chips: 0 };
    let audioReady = false;

    // MULTI-INSTANCE AUDIO ENGINE
    const sfx = {
        star: "https://www.myinstants.com/media/sounds/sigmaman1432-24757.mp3",
        win: "https://www.myinstants.com/media/sounds/correct_2.mp3",
        boom: "https://www.myinstants.com/media/sounds/explosion.mp3",
        click: "https://raw.githubusercontent.com/theking9x/Roblox-Sounds/main/UIPresentation.mp3"
    };

    function initAudio() { audioReady = true; }
    function play(name) {
        if(!audioReady) return;
        const a = new Audio(sfx[name]);
        a.volume = name === 'boom' ? 0.2 : 0.4;
        a.play();
        a.onended = () => a.remove();
    }

    // AUTH
    async function auth(type) {
        const u = document.getElementById('user').value.trim();
        if(!u) return;
        currentUser = u;
        localStorage.setItem('swarm_user', u);
        const r = await fetch(`${DB_URL}/${u}.json`);
        userData = await r.json() || { chips: 500 };
        loginSuccess();
    }
    function loginSuccess() {
        document.getElementById('auth-screen').classList.add('hidden');
        document.getElementById('main-app').classList.remove('hidden');
        document.getElementById('display-name').innerText = currentUser;
        updateUI();
    }
    function logout() { localStorage.removeItem('swarm_user'); location.reload(); }
    function updateUI() {
        document.getElementById('display-chips').innerText = Math.floor(userData.chips);
        fetch(`${DB_URL}/${currentUser}.json`, { method: 'PUT', body: JSON.stringify(userData) });
    }

    // GAME CONTROLLER
    function openGame(game) {
        play('click');
        document.getElementById('game-overlay').classList.remove('hidden');
        const cont = document.getElementById('game-content');
        
        if(game === 'mines') {
            cont.innerHTML = `
                <div style="text-align:center;">
                    <h2 style="color:#e91e63;">MINES</h2>
                    S√°zka: <input type="number" id="m-bet" value="50" style="background:#000; border:1px solid #333; color:white; padding:10px; border-radius:8px; width:80px;">
                    <button onclick="startMines()" style="padding:10px 20px; background:var(--orange); border:none; border-radius:8px; font-weight:bold; cursor:pointer;">START</button>
                    <button id="m-cash" class="hidden" onclick="cashoutMines()" style="padding:10px 20px; background:#2ecc71; border:none; border-radius:8px; font-weight:bold; cursor:pointer;">CASH OUT</button>
                    <div class="m-grid" id="m-board"></div>
                </div>
            `;
        }
        // ... (zde by byly k√≥d pro kostky a ruletu)
    }

    function closeGame() { document.getElementById('game-overlay').classList.add('hidden'); }

    // MINES LOGIC (S OPRAVEN√ùM ZVUKEM)
    let mActive = false, mMult = 1, mBet = 0, mBombs = [];
    function startMines() {
        mBet = parseInt(document.getElementById('m-bet').value);
        if(mBet > userData.chips) return alert("M√°lo chip≈Ø!");
        userData.chips -= mBet; mActive = true; mMult = 1; mBombs = [];
        updateUI();
        const board = document.getElementById('m-board'); board.innerHTML = '';
        while(mBombs.length < 3) { let r = Math.floor(Math.random()*25); if(!mBombs.includes(r)) mBombs.push(r); }
        for(let i=0; i<25; i++) {
            let t = document.createElement('div'); t.className = 'tile';
            t.onclick = () => {
                if(!mActive || t.innerHTML !== "") return;
                if(mBombs.includes(i)) {
                    t.innerHTML = 'üí•'; play('boom'); mActive = false;
                    document.getElementById('m-cash').classList.add('hidden');
                } else {
                    t.innerHTML = '‚≠ê'; play('star'); // Teƒè to cink√° poka≈æd√©!
                    mMult *= 1.25; document.getElementById('m-cash').classList.remove('hidden');
                }
            };
            board.appendChild(t);
        }
    }
    function cashoutMines() {
        if(!mActive) return;
        userData.chips += Math.floor(mBet * mMult); 
        play('win'); // Poka≈æd√© ƒçist√Ω v√Ωhern√≠ zvuk!
        mActive = false; updateUI(); closeGame();
    }

</script>
</body>
</html>
