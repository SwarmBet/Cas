<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>Golden Casino & Sand Mine</title>
    <style>
        body { background: #0a0a0a; color: white; font-family: sans-serif; display: flex; justify-content: center; margin: 0; }
        .game-container { width: 450px; background: #1a1a1a; border: 4px solid #d4af37; border-radius: 20px; padding: 20px; margin-top: 20px; text-align: center; box-shadow: 0 0 50px rgba(0,0,0,0.5); }
        
        /* Horn√≠ panel */
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 2px solid #333; padding-bottom: 10px; }
        .logo { color: #d4af37; cursor: pointer; user-select: none; }
        .balance { font-size: 24px; color: #ffd700; font-weight: bold; }

        /* Menu */
        .menu { margin: 20px 0; display: flex; gap: 10px; justify-content: center; }
        .menu button { background: #333; color: white; border: none; padding: 10px; border-radius: 5px; cursor: pointer; }
        .menu button.active { background: #d4af37; color: black; }

        /* P√≠skovna */
        #sand-mine { padding: 40px 20px; background: #c2b280; border-radius: 15px; color: #5d4037; }
        .sand-pile { font-size: 50px; cursor: pointer; transition: transform 0.1s; display: inline-block; }
        .sand-pile:active { transform: scale(0.8); }

        /* Blackjack */
        .card-area { display: flex; justify-content: center; gap: 5px; min-height: 80px; margin: 10px 0; }
        .card { width: 50px; height: 75px; background: white; color: black; border-radius: 5px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 18px; border: 1px solid #999; }
        .btn-action { background: #d4af37; border: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; cursor: pointer; margin: 5px; }
        .btn-action:disabled { background: #555; }

        .hidden { display: none; }
        .status { margin: 15px 0; font-weight: bold; color: #ffd700; min-height: 20px; }
    </style>
</head>
<body>

<div class="game-container">
    <div class="header">
        <h2 class="logo" onclick="adminCommand()">GOLDEN STAKE</h2>
        <div class="balance">üí∞ <span id="chips">0</span></div>
    </div>

    <div class="status" id="status">V√≠tej! Zaƒçni v p√≠skovnƒõ.</div>

    <div class="menu">
        <button id="btn-mine" class="active" onclick="showTab('mine')">P√≠skovna üèñÔ∏è</button>
        <button id="btn-bj" onclick="showTab('bj')">Blackjack üÉè</button>
    </div>

    <div id="tab-mine">
        <h3>Tƒõ≈æba p√≠sku</h3>
        <p>Klikni na p√≠sek a najdi ≈æetony!</p>
        <div class="sand-pile" onclick="mineSand()">üèñÔ∏è</div>
        <p><small>(1 klik = ≈°ance na 1-3 ≈æetony)</small></p>
    </div>

    <div id="tab-bj" class="hidden">
        <div id="bj-setup">
            <input type="number" id="bet-input" value="10" style="width:50px">
            <button class="btn-action" onclick="bjStart()">Rozdat karty</button>
        </div>
        
        <div id="bj-game" class="hidden">
            <p>Dealer: <span id="d-score">?</span></p>
            <div class="card-area" id="d-cards"></div>
            <p>Ty: <span id="p-score">0</span></p>
            <div class="card-area" id="p-cards"></div>
            <button class="btn-action" id="hit-btn" onclick="bjHit()">HIT</button>
            <button class="btn-action" id="stand-btn" onclick="bjStand()">STAND</button>
        </div>
    </div>
</div>

<script>
    // --- DATA ---
    let chips = parseInt(localStorage.getItem('chips')) || 0;
    let playing = false;
    let pHand = [], dHand = [], deck = [], currentBet = 0;

    const sfx = {
        card: new Audio('https://www.soundjay.com/misc/sounds/card-slap-1.mp3'),
        dig: new Audio('https://www.soundjay.com/button/sounds/button-37.mp3'),
        win: new Audio('https://www.soundjay.com/misc/sounds/bell-ringing-05.mp3')
    };
    Object.values(sfx).forEach(s => s.volume = 0.2);

    function updateUI() {
        document.getElementById('chips').innerText = chips;
        localStorage.setItem('chips', chips);
    }
    updateUI();

    // --- P≈òEP√çN√ÅN√ç ---
    function showTab(tab) {
        if(playing) return;
        document.getElementById('tab-mine').classList.toggle('hidden', tab !== 'mine');
        document.getElementById('tab-bj').classList.toggle('hidden', tab !== 'bj');
        document.getElementById('btn-mine').classList.toggle('active', tab === 'mine');
        document.getElementById('btn-bj').classList.toggle('active', tab === 'bj');
    }

    // --- Tƒö≈ΩBA ---
    function mineSand() {
        sfx.dig.currentTime = 0; sfx.dig.play();
        if(Math.random() > 0.7) {
            let gain = Math.floor(Math.random() * 3) + 1;
            chips += gain;
            document.getElementById('status').innerText = `Na≈°el jsi ${gain} ≈æetony v p√≠sku!`;
            updateUI();
        }
    }

    // --- ADMIN (Klikni na logo) ---
    function adminCommand() {
        let pw = prompt("Zadej heslo pro p≈ôid√°n√≠ ≈æeton≈Ø:");
        if(pw === "admin") {
            let amt = parseInt(prompt("Kolik ≈æeton≈Ø chce≈° p≈ôidat?"));
            if(!isNaN(amt)) { chips += amt; updateUI(); }
        }
    }

    // --- BLACKJACK LOGIKA ---
    function bjStart() {
        currentBet = parseInt(document.getElementById('bet-input').value);
        if(currentBet > chips || currentBet <= 0) {
            document.getElementById('status').innerText = "Nem√°≈° dost ≈æeton≈Ø!";
            return;
        }

        chips -= currentBet;
        updateUI();
        playing = true;
        
        document.getElementById('bj-setup').classList.add('hidden');
        document.getElementById('bj-game').classList.remove('hidden');
        document.getElementById('status').innerText = "Hra o " + currentBet;

        deck = [];
        ['‚ô†','‚ô•','‚ô¶','‚ô£'].forEach(s => ['2','3','4','5','6','7','8','9','10','J','Q','K','A'].forEach(v => deck.push({v,s})));
        deck.sort(() => Math.random() - 0.5);

        pHand = [deck.pop(), deck.pop()];
        dHand = [deck.pop(), deck.pop()];
        
        renderBJ(false);
        if(getVal(pHand) === 21) bjEnd('win', "BLACKJACK!");
    }

    function renderBJ(all) {
        const pArea = document.getElementById('p-cards'), dArea = document.getElementById('d-cards');
        pArea.innerHTML = ''; dArea.innerHTML = '';
        
        pHand.forEach(c => pArea.innerHTML += `<div class="card">${c.v}${c.s}</div>`);
        dHand.forEach((c, i) => {
            dArea.innerHTML += `<div class="card" style="${!all && i===1 ? 'background:black':''}">${!all && i===1 ? '' : c.v+c.s}</div>`;
        });

        document.getElementById('p-score').innerText = getVal(pHand);
        document.getElementById('d-score').innerText = all ? getVal(dHand) : "?";
    }

    function getVal(h) {
        let s = 0, a = 0;
        h.forEach(c => {
            if(['J','Q','K'].includes(c.v)) s += 10;
            else if(c.v === 'A') { s += 11; a++; }
            else s += parseInt(c.v);
        });
        while(s > 21 && a > 0) { s -= 10; a--; }
        return s;
    }

    function bjHit() {
        if(!playing) return;
        pHand.push(deck.pop());
        sfx.card.currentTime = 0; sfx.card.play();
        renderBJ(false);
        if(getVal(pHand) > 21) bjEnd('lose', "P≈òET√ÅHL JSI!");
    }

    async function bjStand() {
        if(!playing) return;
        document.getElementById('hit-btn').disabled = true;
        document.getElementById('stand-btn').disabled = true;
        
        renderBJ(true);
        while(getVal(dHand) < 17) {
            await new Promise(r => setTimeout(r, 600));
            dHand.push(deck.pop());
            sfx.card.play();
            renderBJ(true);
        }

        let ps = getVal(pHand), ds = getVal(dHand);
        if(ds > 21 || ps > ds) bjEnd('win', "VYHR√ÅL JSI!");
        else if(ps < ds) bjEnd('lose', "DEALER VYHR√ÅL");
        else bjEnd('draw', "REMIZA");
    }

    function bjEnd(res, msg) {
        playing = false;
        if(res === 'win') { chips += currentBet * 2; sfx.win.play(); }
        if(res === 'draw') { chips += currentBet; }
        
        updateUI();
        document.getElementById('status').innerText = msg;
        document.getElementById('hit-btn').disabled = false;
        document.getElementById('stand-btn').disabled = false;
        document.getElementById('bj-setup').classList.remove('hidden');
    }
</script>
</body>
</html>
