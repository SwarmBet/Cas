<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <title>SwarmBet - Chip Stacking Roulette</title>
    <style>
        :root { --orange: #ff9900; --dark: #0a0a0a; --panel: #151515; --green: #27ae60; --red: #e74c3c; --black: #2c3e50; }
        body { background-color: var(--dark); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; }
        .container { width: 1100px; margin: 20px auto; }
        
        /* TABULKA */
        .betting-table { display: grid; grid-template-columns: 80px repeat(12, 1fr); gap: 5px; position: relative; }
        .cell { 
            height: 80px; display: flex; align-items: center; justify-content: center; 
            cursor: pointer; font-weight: bold; border-radius: 4px; border: 2px solid #333; 
            position: relative; font-size: 20px; transition: 0.2s; overflow: visible;
        }
        .zero { grid-row: span 3; height: 250px; background: var(--green); }
        .red { background: var(--red); }
        .black { background: var(--black); }

        /* ŽETONY (CHIPS) */
        .chip-stack {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }

        .chip {
            position: absolute;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: radial-gradient(circle, #fff 0%, var(--orange) 70%, #cc7a00 100%);
            border: 2px dashed rgba(0,0,0,0.4);
            color: black;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 900;
            box-shadow: 0 2px 4px rgba(0,0,0,0.5);
            transition: transform 0.1s;
        }

        /* OVLÁDÁNÍ */
        .controls { margin-top: 30px; display: flex; gap: 20px; justify-content: center; align-items: center; background: #000; padding: 20px; border-radius: 10px; }
        .btn-spin { background: var(--orange); border: none; padding: 15px 30px; border-radius: 8px; font-weight: bold; cursor: pointer; }
        input { background: #111; border: 1px solid #444; color: var(--orange); padding: 10px; border-radius: 5px; width: 80px; text-align: center; }
        
        /* FOOTER */
        footer { text-align: center; padding: 20px; color: #444; }
    </style>
</head>
<body>

<div class="container">
    <div style="display:flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h1 style="color:var(--orange)">SWARMBET ROULETTE</h1>
        <div style="font-size: 24px;">⭐ <span id="display-chips">500</span></div>
    </div>

    <div class="betting-table" id="r-table">
        </div>

    <div class="controls">
        SÁZKA NA KLIK: <input type="number" id="bet-val" value="10">
        <button class="btn-spin" onclick="clearAll()">VYMAZAT SÁZKY</button>
        <button class="btn-spin" style="background:#fff" onclick="alert('Spinning... (Logika je stejná jako v předchozím kódu)')">SPIN</button>
    </div>

    <footer>
        © 2026 Swarmbet | Entertainment purposes only.
    </footer>
</div>

<script>
    let totalChips = 500;
    let betData = {}; // Ukládá: { "n5": { total: 50, count: 5 } }
    const redNumbers = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];

    function buildTable() {
        const table = document.getElementById('r-table');
        let html = `<div class="cell zero" onclick="placeChip('n0')">0<div class="chip-stack" id="stack-n0"></div></div>`;
        
        for(let row = 3; row >= 1; row--) {
            for(let col = 1; col <= 12; col++) {
                let n = (col - 1) * 3 + row;
                let color = redNumbers.includes(n) ? 'red' : 'black';
                html += `<div class="cell ${color}" onclick="placeChip('n${n}')">${n}<div class="chip-stack" id="stack-n${n}"></div></div>`;
            }
        }
        table.innerHTML = html;
    }

    function placeChip(cellId) {
        let betAmount = parseInt(document.getElementById('bet-val').value);
        if(betAmount > totalChips) return;

        totalChips -= betAmount;
        document.getElementById('display-chips').innerText = totalChips;

        // Inicializace dat pro buňku
        if(!betData[cellId]) {
            betData[cellId] = { total: 0, count: 0 };
        }

        betData[cellId].total += betAmount;
        
        // Přidání vizuálního žetonu (max 5)
        if(betData[cellId].count < 5) {
            betData[cellId].count++;
            renderChip(cellId, betData[cellId].count, betAmount);
        } else {
            // Pokud je tam už 5 žetonů, jen aktualizujeme text toho horního
            const stack = document.getElementById('stack-' + cellId);
            const topChip = stack.lastChild;
            if(topChip) topChip.innerText = betData[cellId].total;
        }
        
        // Zvukový efekt
        new Audio('https://raw.githubusercontent.com/theking9x/Roblox-Sounds/main/UIPresentation.mp3').play().catch(()=>{});
    }

    function renderChip(cellId, index, amount) {
        const stack = document.getElementById('stack-' + cellId);
        const chip = document.createElement('div');
        chip.className = 'chip';
        
        // Efekt skládání na sebe (mírný offset)
        const offset = (index - 1) * 3;
        chip.style.transform = `translateY(-${offset}px) translateX(${offset/2}px)`;
        chip.style.zIndex = index;
        
        // Horní žeton ukazuje celkovou sumu na daném políčku
        chip.innerText = betData[cellId].total;
        
        // Pokud přidáváme nový žeton, ten předchozí vymažeme (aby číslo bylo jen na tom horním)
        if(stack.lastChild) stack.lastChild.innerText = "";
        
        stack.appendChild(chip);
    }

    function clearAll() {
        for(let key in betData) {
            totalChips += betData[key].total;
            document.getElementById('stack-' + key).innerHTML = "";
        }
        betData = {};
        document.getElementById('display-chips').innerText = totalChips;
    }

    window.onload = buildTable;
</script>
</body>
</html>
